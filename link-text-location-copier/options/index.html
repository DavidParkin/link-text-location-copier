<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Link Text and Location Copier settings</title>
    <link rel="stylesheet" href="style.css" />
    <!-- enable browser styles for local development
    <link rel="stylesheet" href="chrome://browser/content/extension.css" />
    -->
  </head>

  <body>
    <div class="optionspage">
      <header class="panel-section panel-section-header">
        <div class="icon-section-header"><img src="../paint-brush.svg" alt="" /></div>
        <div class="text-section-header">Link Text and Location Copier Options Page</div>
      </header>
      <main>
        <form>
          <table id="formats" class="formats">
            <thead>
              <tr>
                <th scope="col">Menu label</th>
                <th scope="col">Format</th>
                <th scope="col">Link</th>
                <th scope="col">Page</th>
                <th scope="col">Selection</th>
                <th scope="col">Move</th>
                <td></td>
              </tr>
            </thead>
            <tbody></tbody>
          </table>

          <button class="browser-style" type="button" id="addCustomFormat">Add menuitem</button>
          <button class="browser-style" type="button" id="addSeparator">Add separator</button>

          <div class="checkboxItem browser-style">
            <label><input type="checkbox" id="decodedURI" /> Don’t encode link location</label>
            (<a href="https://evilnickname.github.io/link-text-location-copier/#option-urls" target="_blank" rel="noopener">what’s this?</a>)
          </div>
          <div class="checkboxItem browser-style">
            <label><input type="checkbox" id="dontStripUTM" /> Don’t strip UTM paramaters from link</label>
            (<a href="https://evilnickname.github.io/link-text-location-copier/#strip-utm" target="_blank" rel="noopener">what’s this?</a>)
          </div>
          <div>
            <button class="browser-style" type="button" id="export">Export settings</button>
            <input type="file" id="import" accept=".json" hidden></button>
            <button class="browser-style" type="button" id="importBtn">Import settings</button>
          </div>

          <footer>
            <button class="browser-style" type="button" id="reset">Reset defaults</button>
            <button class="browser-style default" type="button" id="save">Save settings</button>
          </footer>
        </form>
      </main>
    </div>

    <template id="formatrow">
      <tr class="format" data-n="">
        <td class="format__displayname"></td>
        <td class="format__formatstring"></td>
        <td class="checkboxItem browser-style">
          <label><input type="checkbox" data-context="link" /></label>
        </td>
        <td class="checkboxItem browser-style">
          <label><input type="checkbox" data-context="page" /></label>
        </td>
        <td class="checkboxItem browser-style">
          <label><input type="checkbox" data-context="selection" /></label>
        </td>
        <td>
          <button class="browser-style" type="button" data-action="up">▲</button>
          <button class="browser-style" type="button" data-action="down">▼</button>
        </td>
        <td>
          <button class="browser-style" type="button" data-action="edit">edit</button>
          <button class="browser-style" type="button" data-action="remove">remove</button>
        </td>
      </tr>
    </template>

    <template id="separator">
      <tr class="format" data-n="">
        <td colspan="2"><hr /></td>
        <td class="checkboxItem browser-style">
          <label><input type="checkbox" data-context="link" /></label>
        </td>
        <td class="checkboxItem browser-style">
          <label><input type="checkbox" data-context="page" /></label>
        </td>
        <td class="checkboxItem browser-style">
          <label><input type="checkbox" data-context="selection" /></label>
        </td>
        <td>
          <button class="browser-style" type="button" data-action="up">▲</button>
          <button class="browser-style" type="button" data-action="down">▼</button>
        </td>
        <td>
          <button class="browser-style" type="button" data-action="remove">remove</button>
        </td>
      </tr>
    </template>

    <dialog class="modal" id="formatDialog">
      <form method="dialog">
        <div class="input-wrapper">
          <label for="format-displayname">Menu label</label>
          <input type="text" id="format-displayname" />
        </div>
        <div class="input-wrapper">
          <label for="format-template">Format</label>
          <input type="text" id="format-template" />
        </div>
        <div>
          <label><input type="checkbox" id="output-as-html" /> Output as rich text </label> (<a href="https://evilnickname.github.io/link-text-location-copier/#rich-text">custom format should be HTML</a>)
        </div>
        <div>
          <label><input type="checkbox" id="format-title-override" /> Don’t show context menu prefix </label> (<a href="https://evilnickname.github.io/link-text-location-copier/#override-menu">what’s this?</a>)
        </div>
        <details class="format-info">
          <summary>Custom format variables</summary>
          <b>%T</b> — Link title, page title, or text selection<br />
          <b>%U</b> — Link location, or page location<br />
          <b>%I</b> — Image location (linked images only)<br />
          <b>%linktitle%</b> — Link title<br />
          <b>%linkurl%</b> — Link URL<br />
          <b>%pagetitle%</b> — Page title<br />
          <b>%pageurl%</b> — Page URL<br />
          <b>%selection%</b> — Selected text<br />
          <b>%N</b> — Newline character<br />
          <b>%B</b> — Tab character<br />
          <b>%L</b> — Localized time stamp
        </details>
        <div class="buttons">
          <button class="browser-style" type="button" data-action="cancel">cancel</button>
          <button class="browser-style" type="button" data-action="save">save</button>
        </div>
      </form>
    </dialog>

    <script src="../defaults.js"></script>
    <script src="options.js"></script>
  </body>
</html>
